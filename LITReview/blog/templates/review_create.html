{% extends "base.html" %}

{% block content %}
<h2>Créer une critique</h2>

{% if ticket %}
    <div class="form-section">
        <div class="ticket-request-header">
            Vous êtes en train de poster en réponse à
        </div>
        <div class="post-encadre">
            <div class="post-ligne-haut">
                <span>{{ ticket.user.username }} a demandé une critique</span>
                <span class="post-date">{{ ticket.time_created|date:"H:i, d M Y" }}</span>
            </div>
            <div class="post-titre">{{ ticket.title }}</div>
            <div class="post-desc">{{ ticket.description }}</div>
            {% if ticket.image %}
                <div class="post-image">
                    <img src="{{ ticket.image.url }}" alt="Image pour {{ ticket.title }}" class="ticket-image" />
                </div>
            {% endif %}
        </div>
    </div>
    <form method="post" enctype="multipart/form-data" class="review-form">
        {% csrf_token %}
        <div class="form-title">Critique</div>
        <div class="form-group">
            {{ review_form.headline.label_tag }}
            {{ review_form.headline }}
        </div>
        <div class="form-group rating">
            {{ review_form.rating.label_tag }}
            {{ review_form.rating }}
        </div>
        <div class="form-group">
            {{ review_form.body.label_tag }}
            {{ review_form.body }}
        </div>
        <div class="form-actions">
            <button type="submit" class="submit-btn">Envoyer</button>
        </div>
    </form>
{% else %}
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <fieldset class="form-section">
            <legend>Livre / Article</legend>
            <div class="form-group">
                {{ ticket_form.title.label_tag }}
                {{ ticket_form.title }}
            </div>
            <div class="form-group">
                {{ ticket_form.description.label_tag }}
                {{ ticket_form.description }}
            </div>
            <div class="form-group">
                {{ ticket_form.image.label_tag }}
                {{ ticket_form.image }}
            </div>
        </fieldset>
        <fieldset class="form-section">
            <legend>Critique</legend>
            <div class="form-group">
                {{ review_form.headline.label_tag }}
                {{ review_form.headline }}
            </div>
            <div class="form-group rating">
                {{ review_form.rating.label_tag }}
                {{ review_form.rating }}
            </div>
            <div class="form-group">
                {{ review_form.body.label_tag }}
                {{ review_form.body }}
            </div>
        </fieldset>
        <div class="form-actions">
            <button type="submit" class="submit-btn">Envoyer</button>
        </div>
    </form>
{% endif %}
{% endblock %}
